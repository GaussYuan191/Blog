---
title: 常见的功能函数
categories:
  - - 功能函数
tags:
  - js
mathjax: false
abbrlink: 19005
date: 2022-02-16 09:31:12
updated: 2022-02-16 09:31:12
---

![](/gallery/js-2022-2-16.jpeg)

<!-- more -->

# 对象扁平化

主要是通过递归，使嵌套的数据扁平

```js
// 创建判断对象的函数
function isObject(obj) {
    return Object.prototype.toString.call(obj).slice(8, -1) === 'Object'
}
function flatObject (obj, pre = '', res = {}) {
    if (!obj) return;
    Reflect.ownKeys(obj).forEach((key) => {
        let perKey = pre + key;
        if (isObject(obj[key])) {
            flatObject(obj[key], perKey + '.', res);
        } else {
            res[perKey] = obj[key];
        }
    })  
    return res;
}
```

# 数组偏平化

let arr = [[1, 2, 3],[1,3,[4]],3];

**1.Array.flat**

flat 默认只会拉平一层,Infinity,全拉平

```js
arr.flat(Infinity) // [ 1, 2, 3, 1, 3, 4, 3 ]
```

**2.reduce**

```js
var flat_reduce = (arr) => {
  return arr.reduce((pre, cur) => {
    return Array.isArray(cur) ? pre.concat(flat_reduce(cur)) : pre.concat(cur)
  }, [])
}
flat_reduce(arr1)
```

**3.forEach()**

```js
var flat_forEach = (arr) => {
  var ans = [];
  arr.forEach(item => {
    Array.isArray(item) ? ans = ans.concat(flat_forEach(item)) : ans.push(item);
  })
  return ans;
}
```

**4.toString()**

```js
var flat_toString = (arr) => {
  return arr.toString().split(',').map(item => Number(item))
}
flat_toString(arr)
```

**5.join(),split()**

和toString的方法相同

```js
let flat_join = (arr) => {
  return arr.join(',').split(',').map(item => Number(item))
}
flat_join(arr)
```

**6.拓展运算符**

```js
var flat_ = (arr) => {
  // 判断数组中是否包含对象 some
  while (arr.some(item => Array.isArray(item))) {
    arr = [].concat(...arr)
  }
  return arr;
}
flat_(arr)
```

# 数组去重
